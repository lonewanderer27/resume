---
export function flg() {
  const urlWithoutProtol = window.location.href.replace(/^https?:\/\//, "");
  const offsetMinutes = new Date().getTimezoneOffset();
  const absoluteOffsetMinutes = Math.abs(offsetMinutes);
  const offsetHours = Math.floor(absoluteOffsetMinutes / 60);
  const offsetSign = offsetMinutes > 0 ? "-" : "+";
  const gmtOffset = "GMT" + offsetSign + offsetHours;

  const part1_0 = "F";
  const part1_1 = "L";
  const part1_2 = "G";
  const part1_3 = "_";
  const part1 = part1_0+part1_1+part1_2+part1_3;
  const part2 = urlWithoutProtol;
  const part3 = "_" + gmtOffset;

  return part1 + part2 + part3;
}
---

<script>
  import { flg } from "./Flg.astro";

  declare global {
    interface Window {
      flg: typeof flg;
    }
  }

  window.flg = flg;
</script>
